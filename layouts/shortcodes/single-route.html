{{ $online_tickets_current_site := .Get 0 }}
{{ $online_tickets_new_site := .Get 1 }}
{{ $lang := .Get 2 }}
{{ $stations := .Page.Params.stations }}

{{ $translations := dict
    "ru" (dict
        "analogue" "Ğ”Ñ€ÑƒĞ³Ğ¸Ğµ Ğ¿Ğ¾ĞµĞ·Ğ´Ğ° Ğ² ÑÑ‚Ğ¾Ğ¼ Ğ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸"
        "status_active" "âœ… ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚ Ğ°ĞºÑ‚Ğ¸Ğ²ĞµĞ½. ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ"
        "status_inactive" "âŒ ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚ Ğ½Ğµ Ğ°ĞºÑ‚Ğ¸Ğ²ĞµĞ½. ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ"
        "frequency" "Ğ§Ğ°ÑÑ‚Ğ¾Ñ‚Ğ°"
        "frequency_daily" "ĞµĞ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ğ¾"
        "frequency_every_second_day" "Ñ‡ĞµÑ€ĞµĞ· Ğ´ĞµĞ½ÑŒ"
        "travel_time" "Ğ’Ñ€ĞµĞ¼Ñ Ğ² Ğ¿ÑƒÑ‚Ğ¸"
        "train_type" "Ğ¢Ğ¸Ğ¿ Ğ¿Ğ¾ĞµĞ·Ğ´Ğ°"
        "suburban_train" "ÑĞ»ĞµĞºÑ‚Ñ€Ğ¸Ñ‡ĞºĞ°"
        "price" "Ğ¦ĞµĞ½Ğ°"
        "from" "Ğ¾Ñ‚"
        "online_tickets" "ĞĞ½Ğ»Ğ°Ğ¹Ğ½ Ğ±Ğ¸Ğ»ĞµÑ‚Ñ‹"
        "available" "Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹ Ğ½Ğ°"
        "current_site" "Ğ¾Ñ„Ğ¸Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¼ ÑĞ°Ğ¹Ñ‚Ğµ"
        "new_site" "Ğ¾Ñ„Ğ¸Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ±ĞµÑ‚Ğ°-ÑĞ°Ğ¹Ñ‚Ğµ"
        "armenian_site" "Ğ¾Ñ„Ğ¸Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¼ ÑĞ°Ğ¹Ñ‚Ğµ Ğ®Ğ¶Ğ½Ğ¾-ĞšĞ°Ğ²ĞºĞ°Ğ·ÑĞºĞ¾Ğ¹ Ğ¶ĞµĞ»ĞµĞ·Ğ½Ğ¾Ğ¹ Ğ´Ğ¾Ñ€Ğ¾Ğ³Ğ¸ (ĞÑ€Ğ¼ĞµĞ½Ğ¸Ñ)"
        "not_available" "Ğ½Ğµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹"
        "uncomplete_disclaimer" "ğŸš§ Ğ£ Ğ¼ĞµĞ½Ñ Ğ½ĞµÑ‚ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ³Ğ¾ ÑĞ¿Ğ¸ÑĞºĞ° ÑÑ‚Ğ°Ğ½Ñ†Ğ¸Ğ¹ Ğ¸Ğ»Ğ¸ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ¿Ñ€Ğ¸Ğ±Ñ‹Ñ‚Ğ¸Ñ Ğ´Ğ»Ñ ÑÑ‚Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾ĞµĞ·Ğ´Ğ°. Ğ•Ğ³Ğ¾ Ğ½ĞµÑ‚ Ğ¸ Ğ½Ğ° Ğ¾Ñ„Ğ¸Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¼ ÑĞ°Ğ¹Ñ‚Ğµ. Ğ•ÑĞ»Ğ¸ Ğ²Ñ‹ Ñ€Ğ°ÑĞ¿Ğ¾Ğ»Ğ°Ğ³Ğ°ĞµÑ‚Ğµ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸ĞµĞ¹, Ğ¿Ğ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, ÑĞ¾Ğ¾Ğ±Ñ‰Ğ¸Ñ‚Ğµ Ğ¼Ğ½Ğµ."
        "schedule" "Ğ Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ"
        "station" "Ğ¡Ñ‚Ğ°Ğ½Ñ†Ğ¸Ñ"
        "arrival" "ĞŸÑ€Ğ¸Ğ±Ñ‹Ñ‚Ğ¸Ğµ"
        "stop" "Ğ¡Ñ‚Ğ¾ÑĞ½ĞºĞ°, Ğ¼Ğ¸Ğ½"
        "departure" "ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ"
        "back_to_map" "ĞĞ° Ğ¿Ğ¾Ğ»Ğ½ÑƒÑ ĞºĞ°Ñ€Ñ‚Ñƒ Ğ¿Ğ¾ĞµĞ·Ğ´Ğ¾Ğ²"
        "route_on_map" "ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚ Ğ½Ğ° ĞºĞ°Ñ€Ñ‚Ğµ"
    )
    "en" (dict
        "analogue" "Other trains in this direction"
        "status_active" "âœ… Route is currently active. Last updated"
        "status_inactive" "âŒ Route is currently inactive. Last updated"
        "frequency" "Frequency"
        "frequency_daily" "daily"
        "frequency_every_second_day" "every second day"
        "travel_time" "Travel time"
        "train_type" "Train type"
        "suburban_train" "suburban"
        "price" "Price"
        "from" "from"
        "online_tickets" "Online tickets"
        "available" "available on the"
        "current_site" "official website"
        "new_site" "official website (beta)"
        "armenian_site" "official website of the South Caucasus Railway (Armenia)"
        "not_available" "not available"
        "uncomplete_disclaimer" "ğŸš§ I don't have a complete list of stations or arrival times for this route. Neither is it on the official website. If you have any additional information, please let me know."
        "schedule" "Schedule"
        "station" "Station"
        "arrival" "Arrival"
        "stop" "Stop, min"
        "departure" "Departure"
        "back_to_map" "To the entire routes map"
        "route_on_map" "Route on the map"
    )
    "ka" (dict
        "analogue" "áƒ¡áƒ®áƒ•áƒ áƒ›áƒáƒ áƒ¨áƒ áƒ£áƒ¢áƒ”áƒ‘áƒ˜ áƒáƒ› áƒ›áƒ˜áƒ›áƒáƒ áƒ—áƒ£áƒšáƒ”áƒ‘áƒáƒ¨áƒ˜"
        "status_active" "âœ… áƒ›áƒáƒ áƒ¨áƒ áƒ£áƒ¢áƒ˜ áƒáƒ¥áƒ¢áƒ˜áƒ£áƒ áƒ˜áƒ. áƒ‘áƒáƒšáƒ áƒªáƒ•áƒšáƒ˜áƒšáƒ”áƒ‘áƒ”áƒ‘áƒ˜"
        "status_inactive" "âŒ áƒ›áƒáƒ áƒ¨áƒ áƒ£áƒ¢áƒ˜ áƒáƒ¥áƒ¢áƒ˜áƒ£áƒ áƒ˜ áƒáƒ áƒáƒ. áƒ‘áƒáƒšáƒ áƒªáƒ•áƒšáƒ˜áƒšáƒ”áƒ‘áƒ”áƒ‘áƒ˜"
        "frequency" "áƒ¡áƒ˜áƒ®áƒ¨áƒ˜áƒ áƒ”"
        "frequency_daily" "áƒ§áƒáƒ•áƒ”áƒšáƒ“áƒ¦áƒ˜áƒ£áƒ áƒáƒ“"
        "frequency_every_second_day" "áƒ—áƒ˜áƒ—áƒáƒ”áƒ£áƒšáƒ˜ áƒ›áƒ”áƒáƒ áƒ” áƒ“áƒ¦áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡"
        "travel_time" "áƒ›áƒáƒ’áƒ–áƒáƒ£áƒ áƒáƒ‘áƒ˜áƒ¡ áƒ“áƒ áƒ"
        "train_type" "áƒ›áƒáƒ¢áƒáƒ áƒ”áƒ‘áƒšáƒ˜áƒ¡ áƒ¢áƒ˜áƒáƒ˜"
        "suburban_train" "áƒ¡áƒáƒ’áƒáƒ áƒ”áƒ£áƒ‘áƒœáƒ áƒ›áƒáƒ¢áƒáƒ áƒ”áƒ‘áƒ”áƒšáƒ˜"
        "price" "áƒ¤áƒáƒ¡áƒ˜"
        "from" "áƒ“áƒáƒœ"
        "online_tickets" "áƒáƒœáƒšáƒáƒ˜áƒœ áƒ‘áƒ˜áƒšáƒ”áƒ—áƒ”áƒ‘áƒ˜"
        "available" "áƒ®áƒ”áƒšáƒ›áƒ˜áƒ¡áƒáƒ¬áƒ•áƒ“áƒáƒ›áƒ˜áƒ"
        "current_site" "áƒáƒ¤áƒ˜áƒªáƒ˜áƒáƒšáƒ£áƒ  áƒ¡áƒáƒ˜áƒ¢áƒ–áƒ”"
        "new_site" "áƒáƒ¤áƒ˜áƒªáƒ˜áƒáƒšáƒ£áƒ  áƒ‘áƒ”áƒ¢áƒ-áƒ¡áƒáƒ˜áƒ¢áƒ–áƒ”"
        "armenian_site" "áƒ¡áƒáƒ›áƒ®áƒ áƒ”áƒ— áƒ™áƒáƒ•áƒ™áƒáƒ¡áƒ˜áƒ˜áƒ¡ áƒ áƒ™áƒ˜áƒœáƒ˜áƒ’áƒ–áƒ˜áƒ¡ (áƒ¡áƒáƒ›áƒ®áƒ”áƒ—áƒ˜) áƒáƒ¤áƒ˜áƒªáƒ˜áƒáƒšáƒ£áƒ  áƒ•áƒ”áƒ‘áƒ’áƒ•áƒ”áƒ áƒ“áƒ–áƒ”"
        "not_available" "áƒáƒ áƒáƒ áƒ®áƒ”áƒšáƒ›áƒ˜áƒ¡áƒáƒ¬áƒ•áƒ“áƒáƒ›áƒ˜"
        "uncomplete_disclaimer" "ğŸš§ áƒ›áƒ” áƒáƒ  áƒ›áƒáƒ¥áƒ•áƒ¡ áƒáƒ› áƒ›áƒáƒ áƒ¨áƒ áƒ£áƒ¢áƒ˜áƒ¡ áƒ’áƒáƒ©áƒ”áƒ áƒ”áƒ‘áƒ”áƒ‘áƒ˜áƒ¡ áƒ¡áƒ áƒ£áƒšáƒ˜ áƒ¡áƒ˜áƒ áƒáƒœ/áƒ“áƒ áƒ©áƒáƒ›áƒáƒ¡áƒ•áƒšáƒ˜áƒ¡ áƒ“áƒ áƒ. áƒáƒ áƒª áƒáƒ¤áƒ˜áƒªáƒ˜áƒáƒšáƒ£áƒ  áƒ¡áƒáƒ˜áƒ¢áƒ–áƒ”áƒ. áƒ—áƒ£ áƒ—áƒ¥áƒ•áƒ”áƒœ áƒ¤áƒšáƒáƒ‘áƒ— áƒ˜áƒœáƒ¤áƒáƒ áƒ›áƒáƒªáƒ˜áƒáƒ¡, áƒ’áƒ—áƒ®áƒáƒ•áƒ— áƒ¨áƒ”áƒ›áƒáƒ¢áƒ§áƒáƒ‘áƒ˜áƒœáƒáƒ—."
        "schedule" "áƒ’áƒáƒœáƒ áƒ˜áƒ’áƒ˜"
        "station" "áƒ¡áƒáƒ“áƒ’áƒ£áƒ áƒ˜"
        "arrival" "áƒ©áƒáƒ›áƒáƒ¡áƒ•áƒšáƒ"
        "stop" "áƒ’áƒáƒ›áƒ’áƒ–áƒáƒ•áƒ áƒ”áƒ‘áƒ, áƒ¬"
        "departure" "áƒ’áƒáƒ›áƒ’áƒ–áƒáƒ•áƒ áƒ”áƒ‘áƒ"
        "back_to_map" "áƒ›áƒáƒ áƒ¨áƒ áƒ£áƒ¢áƒ—áƒ áƒ¡áƒ áƒ£áƒš áƒ áƒ£áƒ™áƒáƒ–áƒ” áƒ“áƒáƒ‘áƒ áƒ£áƒœáƒ”áƒ‘áƒ"
        "route_on_map" "áƒ›áƒáƒ áƒ¨áƒ áƒ£áƒ¢áƒ˜ áƒ áƒ£áƒ™áƒáƒ–áƒ”"
    )
}}

{{ $t := index $translations $lang }}

<!-- Status -->
{{ if .Page.Params.active }}
    <p>{{ $t.status_active }}: {{ now.Format "02.01.2006" }}</p>
{{ else }}
    <p>{{ $t.status_inactive }}: {{ now.Format "02.01.2006" }}</p>
{{ end }}

<!-- Description -->
{{ if .Page.Params.description_ka }}
    <p>{{ .Page.Params.description_ka | safeHTML }}</p>
{{ else if .Page.Params.description_ru }}
    <p>{{ .Page.Params.description_ru | safeHTML }}</p>
{{ else if .Page.Params.description_en }}
    <p>{{ .Page.Params.description_en | safeHTML }}</p>
{{ end }}

{{ if .Page.Params.active }}
    <!-- Frequency -->
    <p><strong>{{ $t.frequency }}:</strong> 
        {{ if eq .Page.Params.frequency "daily" }}
            {{ $t.frequency_daily }}
        {{ else if eq .Page.Params.frequency "every second day" }}
            {{ if .Page.Params.every_second_day_start }}
                <button class="dashed-link esd-calendar" data-timestamp="{{ .Page.Params.every_second_day_start }}" {{ if .Page.Params.end_date }}data-end-date="{{ .Page.Params.end_date }}"{{ end }} data-lang="{{ $lang }}">{{ $t.frequency_every_second_day }}</button>
            {{ else }}
                {{ $t.frequency_every_second_day }}
            {{ end }}
        {{ else if eq $lang "ru" }}
            {{ $months := dict 
                "January" "ÑĞ½Ğ²Ğ°Ñ€Ñ"
                "February" "Ñ„ĞµĞ²Ñ€Ğ°Ğ»Ñ" 
                "March" "Ğ¼Ğ°Ñ€Ñ‚Ğ°" 
                "April" "Ğ°Ğ¿Ñ€ĞµĞ»Ñ" 
                "May" "Ğ¼Ğ°Ñ" 
                "June" "Ğ¸ÑĞ½Ñ" 
                "July" "Ğ¸ÑĞ»Ñ" 
                "August" "Ğ°Ğ²Ğ³ÑƒÑÑ‚Ğ°" 
                "September" "ÑĞµĞ½Ñ‚ÑĞ±Ñ€Ñ" 
                "October" "Ğ¾ĞºÑ‚ÑĞ±Ñ€Ñ" 
                "November" "Ğ½Ğ¾ÑĞ±Ñ€Ñ" 
                "December" "Ğ´ĞµĞºĞ°Ğ±Ñ€Ñ" }}
            
            {{ $frequency := .Page.Params.frequency }}
            {{ range $en, $ru := $months }}
                {{ $frequency = replace $frequency $en $ru }}
            {{ end }}
            {{ $frequency }}
        {{ else if eq $lang "ka" }}
            {{ $months := dict 
                "January" "áƒ˜áƒáƒœáƒ•áƒáƒ áƒ˜"
                "February" "áƒ—áƒ”áƒ‘áƒ”áƒ áƒ•áƒáƒšáƒ˜" 
                "March" "áƒ›áƒáƒ áƒ¢áƒ˜" 
                "April" "áƒáƒáƒ áƒ˜áƒšáƒ˜" 
                "May" "áƒ›áƒáƒ˜áƒ¡áƒ˜" 
                "June" "áƒ˜áƒ•áƒœáƒ˜áƒ¡áƒ˜" 
                "July" "áƒ˜áƒ•áƒšáƒ˜áƒ¡áƒ˜" 
                "August" "áƒáƒ’áƒ•áƒ˜áƒ¡áƒ¢áƒ" 
                "September" "áƒ¡áƒ”áƒ¥áƒ¢áƒ”áƒ›áƒ‘áƒ”áƒ áƒ˜" 
                "October" "áƒáƒ¥áƒ¢áƒáƒ›áƒ‘áƒ”áƒ áƒ˜" 
                "November" "áƒœáƒáƒ”áƒ›áƒ‘áƒ”áƒ áƒ˜" 
                "December" "áƒ“áƒ”áƒ™áƒ”áƒ›áƒ‘áƒ”áƒ áƒ˜" }}
            
            {{ $frequency := .Page.Params.frequency }}
            {{ range $en, $ka := $months }}
                {{ $frequency = replace $frequency $en $ka }}
            {{ end }}
            {{ $frequency }}
        {{ else }}
            {{ .Page.Params.frequency }}
        {{ end }} <br>

    <!-- Travel time -->
    <strong>{{ $t.travel_time }}:</strong> {{ .Page.Params.travel_time }} <br>

    <!-- Train type -->
    {{ if .Page.Params.train_type }}
        <strong>{{ $t.train_type }}:</strong><button class="dashed-link" onclick="toggleTrainInfo('train-info-{{ .Page.Params.train_type }}')">{{ if eq .Page.Params.train_type "stadler" }}Stadler KISS{{ else if eq .Page.Params.train_type "vmk-grt" }}VMK/GRT{{ else if eq .Page.Params.train_type "suburban" }}{{ $t.suburban_train }}{{ end }}</button>
        <div id="train-info-{{ .Page.Params.train_type }}" class="train-info-description">
            {{ partial "shortcodes/train-description.html" (dict "lang" $lang "train_type" .Page.Params.train_type) }}
        </div>
    {{ end }}

    <!-- Price -->
    {{ if .Page.Params.price }}
        <strong>{{ $t.price }}:</strong> {{ if eq .Page.Params.price.price_type "from" }}{{ $t.from }} {{ end }}{{ .Page.Params.price.price }} â‚¾<br>
    {{ end }}

    <!-- Online tickets -->
    <strong>{{ $t.online_tickets }}:</strong> 
    {{ if or (eq $online_tickets_current_site "true") (eq $online_tickets_new_site "true") (eq (int .Page.Params.ref) 201) (eq (int .Page.Params.ref) 202) }}
        {{ $t.available }} 
        {{ if or (eq (int .Page.Params.ref) 201) (eq (int .Page.Params.ref) 202) }}
            <a href="https://www.railway.am/eng" target="_blank">{{ $t.armenian_site }}</a>
        {{ else }}
            {{ if eq $online_tickets_current_site "true" }}
                <a href="https://ticket.railway.ge/" target="_blank">{{ $t.current_site }}</a>
            {{ end }}
            {{ if eq $online_tickets_new_site "true" }}
                <a href="https://gr.com.ge/en" target="_blank">{{ $t.new_site }}</a>
            {{ end }}
        {{ end }}
    {{ else }}{{ $t.not_available }}
    {{ end }}</p>

    <!-- Schedule -->
    <h3>{{ $t.schedule }}</h3>
    {{ if not .Page.Params.complete }}
    <p>{{ $t.uncomplete_disclaimer }}</p>
    {{ end }}

    <!-- Stations -->
    {{ if not .Page.Params.has_arrival_time }}
    <ul class="route-timeline">
        {{ range $index, $station := $stations }}
        <li class="{{ if or (eq $index 0) (eq $index (sub (len $stations) 1)) }}terminal{{ else }}intermediate{{ end }}">
            <span class="station-time">{{ .departure_time }}</span>
            <a href="/{{ if eq $lang "ru" }}ru/{{ else if eq $lang "ka" }}ka/{{ end }}stations/{{ .code }}/" class="station-name">
                {{ if eq $lang "ru" }}
                    {{ .name_ru }}
                {{ else if eq $lang "ka" }}
                    {{ .name_ka }}
                {{ else }}
                    {{ .name_en }}
                {{ end }}
            </a>
        </li>
        {{ end }}
    </ul>
    {{ else }}
    <table class="route-schedule-table">
        <tr>
            <th>{{ $t.station }}</th>
            <th>{{ $t.arrival }}</th>
            <th>{{ $t.stop }}</th>
            <th>{{ $t.departure }}</th>
        </tr>
        {{ range $index, $station := $stations }}
        <tr>
            <td>
                <a href="/{{ if eq $lang "ru" }}ru/{{ else if eq $lang "ka" }}ka/{{ end }}stations/{{ .code }}/" class="station-name">
                    {{ if eq $lang "ru" }}
                        {{ .name_ru }}
                    {{ else if eq $lang "ka" }}
                        {{ .name_ka }}
                    {{ else }}
                        {{ .name_en }}
                    {{ end }}
                </a>
            </td>
            <td>
                {{ if eq .role "start" }}
                    -
                {{ else if .arrival_time }}
                    {{ .arrival_time }}
                {{ else }}
                    {{ .time }}
                {{ end }}
            </td>
            {{ if .stop_time }}
                <td>{{ .stop_time }}</td>
            {{ else }}
                <td>-</td>
            {{ end }}
            <td>
                {{ if eq .role "end" }}
                    -
                {{ else }}
                    {{ .departure_time }}
                {{ end }}
            </td>
        </tr>
        {{ end }}
    </table>
    {{ end }}

    <!-- Analogues -->
    {{ if .Page.Params.analogue }}
        <h3>{{ $t.analogue }}</h3>
        {{ $analogueRoutes := slice }}
        {{ range .Page.Params.analogue }}
            {{ $analogueRef := . }}
            {{ range $route := $.Site.Data.routes }}
                {{ if eq (string $route.ref) (string $analogueRef) }}
                    {{ $routeNameEn := index $route "name:en" }}
                    {{ $routeNameRu := index $route "name:ru" }}
                    {{ $routeNameKa := index $route "name:ka" }}
                    {{ $departureTime := "" }}
                    {{ range $route.stations }}
                        {{ if eq .role "start" }}
                            {{ $departureTime = .departure_time }}
                        {{ end }}
                    {{ end }}
                    {{ $routeData := dict "time" $departureTime "ref" $route.ref "lang" $lang "name_ru" $routeNameRu "name_ka" $routeNameKa "name_en" $routeNameEn "every_second_day_start" $route.every_second_day_start "end_date" $route.end_date}}
                    {{ $analogueRoutes = $analogueRoutes | append $routeData }}
                {{ end }}
            {{ end }}
        {{ end }}
        {{ $sortedRoutes := sort $analogueRoutes "time" }}
        {{ range $sortedRoutes }}
            {{ partial "route-link.html" . }}
        {{ end }}
    {{ end }}

    <!-- Route map -->
    <h3>{{ $t.route_on_map }}</h3>
    {{ partial "route-map.html" .Page }}
{{ end }}
<p>ğŸ—º <a href='/{{ $lang }}/'>{{ $t.back_to_map }}</a></p>
<br>

<script>
function toggleTrainInfo(elementId) {
    const description = document.getElementById(elementId);
    if (!description) return;
    if (description.style.display === 'block') {
        description.style.display = 'none';
    } else {
        description.style.display = 'block';
    }
}
</script>

<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "item:": "{{ urls.AbsLangURL "routes" }}",
          "name": {{ i18n "routes" }},
          "url": "{{ urls.AbsLangURL "routes" }}"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "item:": "{{ .Page.Permalink }}",
          "name": {{ .Page.Title }},
          "url": "{{ .Page.Permalink }}"
        }
      ]
    }
  </script>

{{ partial "esd_calendar.html" (dict "Page" .Page "className" "esd-calendar") }}