{{ $online_tickets_current_site := .Get 0 }}
{{ $online_tickets_new_site := .Get 1 }}
{{ $lang := .Get 2 }}
{{ $stations := .Page.Params.stations }}

{{ $translations := dict
    "ru" (dict
        "status" "‚úÖ –ú–∞—Ä—à—Ä—É—Ç –∞–∫—Ç–∏–≤–µ–Ω. –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è"
        "frequency" "–ß–∞—Å—Ç–æ—Ç–∞"
        "frequency_daily" "–µ–∂–µ–¥–Ω–µ–≤–Ω–æ"
        "frequency_two_days" "—á–µ—Ä–µ–∑ –¥–µ–Ω—å"
        "travel_time" "–í—Ä–µ–º—è –≤ –ø—É—Ç–∏"
        "price" "–¶–µ–Ω–∞"
        "from" "–æ—Ç"
        "online_tickets" "–û–Ω–ª–∞–π–Ω –±–∏–ª–µ—Ç—ã"
        "available" "–¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞"
        "current_site" "–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º —Å–∞–π—Ç–µ"
        "new_site" "–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º –±–µ—Ç–∞-—Å–∞–π—Ç–µ (–¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ —Å —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –ì—Ä—É–∑–∏–∏)"
        "not_available" "–Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã"
        "uncomplete_disclaimer" "üöß –£ –º–µ–Ω—è –Ω–µ—Ç –ø–æ–ª–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ —Å—Ç–∞–Ω—Ü–∏–π –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–±—ã—Ç–∏—è –¥–ª—è —ç—Ç–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞. –ï–≥–æ –Ω–µ—Ç –∏ –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º —Å–∞–π—Ç–µ. –ï—Å–ª–∏ –≤—ã —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–æ–±—â–∏—Ç–µ –º–Ω–µ."
        "stations" "–°—Ç–∞–Ω—Ü–∏–∏"
        "back_to_map" "–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –∫–∞—Ä—Ç—É –º–∞—Ä—à—Ä—É—Ç–æ–≤"
    )
    "en" (dict
        "status" "‚úÖ Route is active. Last changes"
        "frequency" "Frequency"
        "frequency_daily" "daily"
        "frequency_two_days" "every second day"
        "travel_time" "Travel time"
        "price" "Price"
        "from" "from"
        "online_tickets" "Online tickets"
        "available" "available on the"
        "current_site" "official website"
        "new_site" "official website (beta, available only from Georgia)"
        "not_available" "not available"
        "uncomplete_disclaimer" "üöß I don't have a complete list of stations or arrival times for this route. Neither is it on the official website. If you have any additional information, please let me know."
        "stations" "Stations"
        "back_to_map" "Back to the entire routes map"
    )
}}

{{ $t := index $translations $lang }}

<p>{{ $t.status }}: {{ now.Format "02.01.2006" }}</p>
<p><strong>{{ $t.frequency }}:</strong> {{ if eq .Page.Params.frequency "daily" }}{{ $t.frequency_daily }}{{ else if eq .Page.Params.frequency "every second day" }}{{ $t.frequency_two_days }}{{ end }} <br>
<strong>{{ $t.travel_time }}:</strong> {{ .Page.Params.travel_time }} <br>
{{ if .Page.Params.price }}
    <strong>{{ $t.price }}:</strong> {{ if eq .Page.Params.price.price_type "from" }}{{ $t.from }} {{ end }}{{ .Page.Params.price.price }} ‚Çæ<br>
{{ end }}
<strong>{{ $t.online_tickets }}:</strong> 
{{ if or (eq $online_tickets_current_site "true") (eq $online_tickets_new_site "true") }}
    {{ $t.available }} 
    {{ if eq $online_tickets_current_site "true" }}
        <a href="https://ticket.railway.ge/" target="_blank">{{ $t.current_site }}</a>
    {{ end }}
    {{ if eq $online_tickets_new_site "true" }}
        <a href="https://gr.com.ge/en" target="_blank">{{ $t.new_site }}</a>
    {{ end }}
{{ else }}{{ $t.not_available }}
{{ end }}</p>

<h3>{{ $t.stations }}:</h3>
{{ if not .Page.Params.complete }}
<p>{{ $t.uncomplete_disclaimer }}</p>
{{ end }}

<ul class="route-timeline">
    {{ range $index, $station := $stations }}
    <li class="{{ if or (eq $index 0) (eq $index (sub (len $stations) 1)) }}terminal{{ else }}intermediate{{ end }}">
        <span class="station-time">{{ .time }}</span>
        <span class="station-name">{{ if eq $lang "ru" }}{{ .name_ru }}{{ else }}{{ .name_en }}{{ end }}</span>
    </li>
    {{ end }}
</ul>

<p>üó∫ <a href='/{{ $lang }}/'>{{ $t.back_to_map }}</a></p>